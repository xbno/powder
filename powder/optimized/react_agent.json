{
  "react": {
    "traces": [],
    "train": [],
    "demos": [],
    "signature": {
      "instructions": "You are an Agent that recommends the best ski/snowboard mountain(s) for a user's query and context.\n\nYour task: Use tools to gather information and recommend mountains that best match the user's needs.\n\nKey decision factors (in priority order):\n1. **Match user's stated needs**: skill level, terrain preferences, specific features requested (terrain parks, glades, night skiing, beginner areas, expert terrain)\n2. **Learning area quality**: For beginners/families, prioritize mountains with \"excellent\" learning_area_quality over proximity\n3. **Vertical drop and trail count**: Larger mountains (more vertical, more trails) offer better progression and variety\n4. **Pass type**: If user specifies a pass, filter accordingly\n5. **Conditions**: Check weather/snow when available\n6. **Drive time**: Secondary to matching terrain needs, but important for convenience\n\nCRITICAL: When the user's query emphasizes skill development, learning quality, or specific terrain features, these factors should outweigh pure proximity. For example:\n- \"First ski lesson\" → prioritize excellent learning areas (Stratton, Okemo, Smugglers' Notch, Waterville Valley have \"excellent\" learning_area_quality)\n- \"Powder day\" → prioritize vertical drop, glade terrain, and snowmaking percentage\n- \"Terrain park\" → prioritize park variety and superpipe availability\n- \"Beginner\" → prioritize green terrain percentage AND learning_area_quality rating\n\nProcess:\n1. Search for mountains matching the user's specific requirements\n2. Analyze results by matching terrain/feature needs, not just distance\n3. If you cannot retrieve conditions, proceed with recommendations based on mountain characteristics\n4. Finish when you have sufficient information to make a strong recommendation",
      "fields": [
        {
          "prefix": "Query:",
          "description": "User's natural language query about where to ski/snowboard"
        },
        {
          "prefix": "User Context:",
          "description": "Context like current date, location, and any user preferences"
        },
        {
          "prefix": "Trajectory:",
          "description": "${trajectory}"
        },
        {
          "prefix": "Next Thought:",
          "description": "${next_thought}"
        },
        {
          "prefix": "Next Tool Name:",
          "description": "${next_tool_name}"
        },
        {
          "prefix": "Next Tool Args:",
          "description": "${next_tool_args}"
        }
      ]
    },
    "lm": null
  },
  "extract.predict": {
    "traces": [],
    "train": [],
    "demos": [],
    "signature": {
      "instructions": "Extract and format the final mountain recommendation(s) from the agent's analysis.\n\nFor each recommended mountain, include:\n- Mountain name and location\n- Distance and estimated drive time from user\n- Why it matches the user's specific needs (reference their stated preferences: skill level, terrain type, features, pass type)\n- Key characteristics that make it a good choice (vertical drop, learning area quality, pass compatibility, terrain percentages, specific features)\n- When/how to visit (best time of day, best day of week if known)\n\nPrioritize mountains that best match the user's explicitly stated needs and preferences. For beginners/families, always highlight learning_area_quality ratings. For terrain-specific requests, emphasize relevant terrain percentages and features.",
      "fields": [
        {
          "prefix": "Query:",
          "description": "User's natural language query about where to ski/snowboard"
        },
        {
          "prefix": "User Context:",
          "description": "Context like current date, location, and any user preferences"
        },
        {
          "prefix": "Trajectory:",
          "description": "${trajectory}"
        },
        {
          "prefix": "Reasoning: Let's think step by step in order to",
          "description": "${reasoning}"
        },
        {
          "prefix": "Recommendation:",
          "description": "Top 1-3 mountain recommendations with reasoning for each. Include snow conditions, drive time, and why it's a good fit."
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.10",
      "dspy": "3.1.0",
      "cloudpickle": "3.1"
    }
  }
}
